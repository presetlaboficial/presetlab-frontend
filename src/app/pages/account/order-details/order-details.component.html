<section class="order-details-card" *ngIf="order$ | async as order">
  <header class="card-header">
    <div class="header-content">
      <span class="label">Pedido</span>
      <h1 class="order-id">#{{ order.id?.slice(0, 8) | uppercase }}</h1>
    </div>

    <div class="status-badge" [ngClass]="order.status">
      <span class="status-dot"></span>
      {{ order.status | titlecase }}
    </div>
  </header>

  <div class="meta-info">
    <p>
      Realizado em
      {{ order.createdAt?.toDate() | date: "dd 'de' MMM, yyyy 'às' HH:mm" }}
    </p>
  </div>

  <div *ngIf="order.status === 'pendente'" class="payment-alert">
    <div class="alert-content">
      <span class="icon">⚠️</span>
      <span>Aguardando pagamento</span>
    </div>
    <a [href]="order.stripeUrl" target="_blank" class="btn-pay">
      Pagar Agora
    </a>
  </div>

  <div class="divider"></div>

  <div class="items-list">
    <div class="item" *ngFor="let item of order.items">
      <div class="item-info">
        <span class="quantity">{{ item.quantity }}x</span>
        <strong class="name">{{ item.name }}</strong>
      </div>
      <span class="price">{{ item.price | currency: "BRL" }}</span>
    </div>
  </div>

  <div class="divider"></div>

  <footer class="card-footer">
    <div class="total-row">
      <span>Total Pago</span>
      <strong class="total-value">{{ order.total | currency: "BRL" }}</strong>
    </div>

    <button (click)="goBack()" class="btn-back">Voltar</button>
  </footer>
</section>

<ng-template #loading>
  <div class="loading-state">Carregando detalhes...</div>
</ng-template>
